<div class="space-y-8">
  <!-- Header -->
  <h1 class="text-4xl font-bold text-gray-900 mb-4">Ruby Community</h1>
  <p class="text-lg text-gray-600">
    Connect with passionate Ruby developers from around the world. Explore their projects, contributions, and insights.
  </p>

  <!-- Active Filters -->
  <% if @filter_location.present? || @filter_company.present? %>
    <div class="bg-gray-50 rounded-lg py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-2">
          <span class="text-sm text-gray-600">Filtering by:</span>
          <% if @filter_location.present? %>
            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white border border-gray-300">
              <%= inline_svg_tag "location.svg", class: "w-3.5 h-3.5 mr-1 text-gray-500" %>
              <%= @filter_location %>
              <%= link_to "×", users_path(company: @filter_company), class: "ml-2 text-gray-400 hover:text-gray-600 text-lg leading-none" %>
            </span>
          <% end %>
          <% if @filter_company.present? %>
            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-white border border-gray-300">
              <%= inline_svg_tag "building.svg", class: "w-3.5 h-3.5 mr-1 text-gray-500" %>
              <%= @filter_company %>
              <%= link_to "×", users_path(location: @filter_location), class: "ml-2 text-gray-400 hover:text-gray-600 text-lg leading-none" %>
            </span>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>

  <!-- Community Members Grid -->
  <div class="space-y-6">
    <!-- Desktop: 3 columns -->
    <div class="hidden lg:flex gap-6">
      <% # Split users into 3 columns for desktop, maintaining left-to-right reading order %>
      <% column1_users = [] %>
      <% column2_users = [] %>
      <% column3_users = [] %>
      
      <% @users.each_with_index do |user, index| %>
        <% case index % 3 %>
        <% when 0 %>
          <% column1_users << user %>
        <% when 1 %>
          <% column2_users << user %>
        <% when 2 %>
          <% column3_users << user %>
        <% end %>
      <% end %>
      
      <% [column1_users, column2_users, column3_users].each do |column_users| %>
        <div class="flex-1 space-y-6">
          <% column_users.each do |user| %>
            <%= render 'users/user_tile', user: user %>
          <% end %>
        </div>
      <% end %>
    </div>
    
    <!-- Tablet: 2 columns -->
    <div class="hidden md:flex lg:hidden gap-6">
      <% column1_users = [] %>
      <% column2_users = [] %>
      
      <% @users.each_with_index do |user, index| %>
        <% if index % 2 == 0 %>
          <% column1_users << user %>
        <% else %>
          <% column2_users << user %>
        <% end %>
      <% end %>
      
      <% [column1_users, column2_users].each do |column_users| %>
        <div class="flex-1 space-y-6">
          <% column_users.each do |user| %>
            <%= render 'users/user_tile', user: user %>
          <% end %>
        </div>
      <% end %>
    </div>
    
    <!-- Mobile: 1 column -->
    <div class="md:hidden space-y-6">
      <% @users.each do |user| %>
        <%= render 'users/user_tile', user: user %>
      <% end %>
    </div>
  </div>

  <!-- Pagination -->
  <% if @users.total_pages > 1 %>
    <div class="mt-8">
      <%= paginate @users %>
    </div>
  <% end %>
</div>